clear *;
s = 'PHAN NGOC QUY TRAN VAN TU NGUYEN MINH TRUNG DUONG DUC MANH DUONG VAN QUAN';
as = double(s);
bas = uint8(dec2bin(as,7)) - 48;
bl7 = double(bas);
G = [1 0 0 0 0 0 0 1 0 1 1;
     0 1 0 0 0 0 0 1 1 0 1;
     0 0 1 0 0 0 0 1 1 1 0;
     0 0 0 1 0 0 0 1 1 1 1;
     0 0 0 0 1 0 0 1 1 1 1;
     0 0 0 0 0 1 0 1 1 1 1;
     0 0 0 0 0 0 1 0 1 1 1];
bl11 = mod(uint8(bl7(:,:)*G),2);
error = zeros(size(bl11),'uint8');
error(:,5) = 1;
r = double(xor(bl11,error));
H = [1 1 1 1 1 1 0 1 0 0 0;
     0 1 1 1 1 1 1 0 1 0 0;
     1 0 1 1 1 1 1 0 0 1 0;
     1 1 0 1 1 1 1 0 0 0 1];
E = [0 0 0 0 0 0 0 0 0 0 0;
     0 0 0 0 0 0 0 0 0 0 1;
     0 0 0 0 0 0 0 0 0 1 0;
     0 0 0 0 0 0 0 0 1 0 0;
     0 0 0 0 0 0 0 1 0 0 0;
     0 0 0 0 0 0 1 0 0 0 0;
     0 0 0 0 0 1 0 0 0 0 0;
     0 0 0 0 1 0 0 0 0 0 0;
     0 0 0 1 0 0 0 0 0 0 0;
     0 0 1 0 0 0 0 0 0 0 0;
     0 1 0 0 0 0 0 0 0 0 0;
     1 0 0 0 0 0 0 0 0 0 0;
     0 0 0 0 0 0 0 0 0 0 0;
     0 1 0 0 0 0 0 0 0 0 0;
     0 0 1 0 0 0 0 0 0 0 0;
     0 0 0 1 0 0 0 0 0 0 0];
s = double(mod(uint8(r(:,:)*H'),2));
e = 1 + s(:,:)*[8 4 2 1]';
%{
e = E(e,:);
r = double(xor(r,e));
r = r(:,1:7);
infor = char(bin2dec(char(r+48)))'
%}